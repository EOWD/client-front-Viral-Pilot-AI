(function(){"use strict";(i=>{try{if(typeof window>"u")return;var e=document.createElement("style");e.appendChild(document.createTextNode(i)),document.head.appendChild(e)}catch(o){console.error("vite-plugin-css-injected-by-js",o)}})(".voice-visualizer__buttons-container{display:flex;justify-content:center;align-items:center;column-gap:20px;row-gap:15px;flex-wrap:wrap;margin-bottom:40px}.voice-visualizer__btn-center{box-sizing:border-box;flex-shrink:0;width:60px;height:60px;padding:0;display:flex;justify-content:center;align-items:center;border-radius:50%;background-color:#fff;border:4px solid #c5c5c5;outline:none;cursor:pointer;transition:border-color .3s,background-color .3s}.voice-visualizer__btn-center:disabled{opacity:.85;cursor:default}.voice-visualizer__btn-center:hover{background-color:#eaeaea;border:4px solid #9f9f9f}.voice-visualizer__btn-center>img{width:auto;height:50%;max-height:30px}.voice-visualizer__btn-center.voice-visualizer__btn-center-pause{background-color:#ff3030}.voice-visualizer__btn-center.voice-visualizer__btn-center-pause:hover{background-color:#ff4f4f}.voice-visualizer__btn-center.voice-visualizer__btn-center-pause>img{height:50%;max-height:16px}.voice-visualizer__btn-center.voice-visualizer__btn-center--border-transparent{border-color:transparent}.voice-visualizer__btn-center.voice-visualizer__btn-center--border-transparent:hover{background-color:#fff}.voice-visualizer__btn-left{box-sizing:border-box;flex-shrink:0;width:60px;height:60px;padding:0;display:flex;justify-content:center;align-items:center;border-radius:50%;background-color:#ff3030;border:4px solid #c5c5c5;outline:none;cursor:pointer;transition:border-color .3s,background-color .3s,opacity .3s}.voice-visualizer__btn-container{min-width:100px;display:flex;justify-content:flex-end}.voice-visualizer__btn-left:hover{background-color:#ff4f4f}.voice-visualizer__btn-left:disabled{opacity:.6;background-color:#ff3030;cursor:default}.voice-visualizer__btn-left.voice-visualizer__btn-left-microphone{background-color:#fff}.voice-visualizer__btn-left.voice-visualizer__btn-left-microphone>img{width:auto;height:50%;max-height:30px}.voice-visualizer__btn-left>img{width:auto;height:50%;max-height:16px}.voice-visualizer__btn-left:hover{border:4px solid #9f9f9f}.voice-visualizer__btn{box-sizing:border-box;min-width:100px;min-height:60px;padding:5px 20px;border-radius:40px;font-size:15px;background-color:#f0f0f0;transition:background-color .3s,opacity .3s}.voice-visualizer__btn:disabled{opacity:.8;background-color:#f0f0f0;cursor:default}.voice-visualizer__btn:hover{background-color:#bebebe}.voice-visualizer__canvas-container{position:relative;width:fit-content;margin:0 auto;overflow:hidden}.voice-visualizer__canvas-container canvas{display:block}.voice-visualizer__canvas-microphone-btn{position:absolute;top:50%;left:50%;width:auto;max-width:12%;min-width:24px;height:50%;max-height:100px;background-color:transparent;border:none;outline:none;transform:translate(-50%,-50%)}.voice-visualizer__canvas-microphone-icon{width:100%;height:100%;will-change:transform;transition:transform .3s}.voice-visualizer__canvas-microphone-btn:hover .voice-visualizer__canvas-microphone-icon{transform:scale(1.03)}.voice-visualizer__canvas-audio-wave-icon{position:absolute;top:50%;left:50%;width:auto;max-width:40%;height:40%;max-height:100px;transform:translate(-118%,-50%) scale(-1)}.voice-visualizer__canvas-audio-wave-icon2{transform:translate(18%,-50%)}.voice-visualizer__canvas-audio-processing{position:absolute;top:50%;left:50%;margin:0;transform:translate(-50%,-50%)}.voice-visualizer__progress-indicator-hovered{position:absolute;top:0;pointer-events:none;height:100%;width:1px;background-color:#85858599}.voice-visualizer__progress-indicator-hovered-time{position:absolute;top:3%;left:1px;width:fit-content;margin:0;padding:0 7px;opacity:.8;font-size:12px;border-radius:0 4px 4px 0;background-color:#575757;text-align:left}.voice-visualizer__progress-indicator-hovered-time.voice-visualizer__progress-indicator-hovered-time-left{left:unset;right:1px;border-radius:4px 0 0 4px}.voice-visualizer__progress-indicator{position:absolute;top:0;pointer-events:none;height:100%;width:1px;background-color:#efefef}.voice-visualizer__progress-indicator-time{position:absolute;top:3%;left:1px;width:fit-content;box-sizing:border-box;min-width:37px;margin:0;padding:0 7px;font-size:12px;border-radius:0 4px 4px 0;text-align:left;color:#000;font-weight:500;background-color:#efefef}.voice-visualizer__progress-indicator-time.voice-visualizer__progress-indicator-time-left{left:unset;right:1px;border-radius:4px 0 0 4px}.voice-visualizer__audio-info-container{box-sizing:border-box;height:55px;display:flex;align-items:center;justify-content:center;gap:30px}.voice-visualizer__audio-info-time{margin:15px 0;min-width:38px;text-align:left}.voice-visualizer__visually-hidden{position:absolute;width:1px;height:1px;margin:-1px;padding:0;border:4px solid #c5c5c5;white-space:nowrap;clip-path:inset(100%);clip:rect(0 0 0 0);overflow:hidden}.relative{position:relative}.spinner__wrapper{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:52px;height:52px;display:flex;justify-content:center;align-items:center}.spinner{flex-shrink:0;width:100%;height:100%;border:4px solid rgba(197,197,197,.5);border-radius:50%;border-top-color:#b7b7b7;animation:spin 1s ease-in-out infinite;-webkit-animation:spin 1s ease-in-out infinite}@keyframes spin{to{transform:rotate(360deg)}}@-webkit-keyframes spin{to{transform:rotate(360deg)}}")})();
import { jsx as o, jsxs as K, Fragment as Ge } from "react/jsx-runtime";
import { useState as u, useRef as N, useCallback as it, useLayoutEffect as Je, forwardRef as ct, useEffect as F } from "react";
const $e = ({
  canvas: e,
  backgroundColor: t
}) => {
  const n = e.height, r = e.width, c = Math.round(r / 2), h = e.getContext("2d");
  return h ? (h.clearRect(0, 0, r, n), t !== "transparent" && (h.fillStyle = t, h.fillRect(0, 0, r, n)), { context: h, height: n, width: r, halfWidth: c }) : null;
}, _e = ({
  context: e,
  color: t,
  rounded: n,
  x: r,
  y: c,
  w: h,
  h: M
}) => {
  e.fillStyle = t, e.beginPath(), e.roundRect ? (e.roundRect(r, c, h, M, n), e.fill()) : e.fillRect(r, c, h, M);
}, ot = ({
  barsData: e,
  canvas: t,
  barWidth: n,
  gap: r,
  backgroundColor: c,
  mainBarColor: h,
  secondaryBarColor: M,
  currentAudioTime: v = 0,
  rounded: p,
  duration: f
}) => {
  const z = $e({ canvas: t, backgroundColor: c });
  if (!z)
    return;
  const { context: g, height: A } = z, S = v / f;
  e.forEach((a, l) => {
    const j = l / e.length, m = S > j;
    _e({
      context: g,
      color: m ? M : h,
      rounded: p,
      x: l * (n + r * n),
      y: A / 2 - a.max,
      h: a.max * 2,
      w: n
    });
  });
};
function st({
  context: e,
  color: t,
  rounded: n,
  width: r,
  height: c,
  barWidth: h
}) {
  _e({
    context: e,
    color: t,
    rounded: n,
    x: r / 2 + h / 2,
    y: c / 2 - 1,
    h: 2,
    w: r - (r / 2 + h / 2)
  });
}
const at = ({
  audioData: e,
  unit: t,
  index: n,
  index2: r,
  canvas: c,
  isRecordingInProgress: h,
  isPausedRecording: M,
  picks: v,
  backgroundColor: p,
  barWidth: f,
  mainBarColor: z,
  secondaryBarColor: g,
  rounded: A,
  animateCurrentPick: S,
  fullscreen: a
}) => {
  const l = $e({ canvas: c, backgroundColor: p });
  if (!l)
    return;
  const { context: j, height: m, width: x, halfWidth: H } = l;
  if (e != null && e.length && h) {
    const $ = Math.max(...e);
    if (!M) {
      if (r.current >= f) {
        r.current = 0;
        const y = (m - $ / 258 * m) / m * 100, te = (-m + $ / 258 * m * 2) / m * 100, O = n.current === f ? {
          startY: y,
          barHeight: te
        } : null;
        n.current >= t ? n.current = f : n.current += f, v.length > (a ? x : H) / f && v.pop(), v.unshift(O);
      }
      r.current += 1;
    }
    !a && ee(), S && _e({
      context: j,
      rounded: A,
      color: z,
      x: a ? x : H,
      y: m - $ / 258 * m,
      h: -m + $ / 258 * m * 2,
      w: f
    });
    let P = (a ? x : H) - r.current;
    v.forEach((y) => {
      y && _e({
        context: j,
        color: z,
        rounded: A,
        x: P,
        y: y.startY * m / 100 > m / 2 - 1 ? m / 2 - 1 : y.startY * m / 100,
        h: y.barHeight * m / 100 > 2 ? y.barHeight * m / 100 : 2,
        w: f
      }), P -= f;
    });
  } else
    v.length = 0;
  function ee() {
    st({
      context: j,
      color: g,
      rounded: A,
      width: x,
      height: m,
      barWidth: f
    });
  }
}, Qe = (e) => {
  const t = Math.floor(e / 3600), n = Math.floor(e % 3600 / 60), r = e % 60, c = Math.floor(
    (r - Math.floor(r)) * 1e3
  );
  return t > 0 ? `${String(t).padStart(2, "0")}:${String(n).padStart(
    2,
    "0"
  )}:${String(Math.floor(r)).padStart(2, "0")}:${String(
    c
  ).charAt(0)}` : n > 0 ? `${String(n).padStart(2, "0")}:${String(
    Math.floor(r)
  ).padStart(2, "0")}:${String(c).charAt(0)}` : `${String(Math.floor(r)).padStart(2, "0")}:${String(
    c
  ).charAt(0)}`;
}, ut = (e) => {
  const t = Math.floor(e / 1e3), n = Math.floor(t / 3600), r = Math.floor(t % 3600 / 60), c = t % 60;
  return n > 0 ? `${String(n).padStart(2, "0")}:${String(r).padStart(
    2,
    "0"
  )}:${String(c).padStart(2, "0")}` : `${String(r).padStart(2, "0")}:${String(c).padStart(2, "0")}`;
};
function We(e) {
  if (typeof e == "string") {
    const t = Number(e);
    if (!Number.isNaN(t))
      return `${Math.trunc(t / 2) * 2}px`;
  }
  return e;
}
const ht = ({
  bufferData: e,
  height: t,
  width: n,
  barWidth: r,
  gap: c
}) => {
  const h = n / (r + c * r), M = Math.floor(e.length / h), v = t / 2;
  let p = [], f = 0;
  for (let z = 0; z < h; z++) {
    const g = [];
    let A = 0;
    for (let a = 0; a < M && z * M + a < e.length; a++) {
      const l = e[z * M + a];
      l > 0 && (g.push(l), A++);
    }
    const S = g.reduce((a, l) => a + l, 0) / A;
    S > f && (f = S), p.push({ max: S });
  }
  if (v * 0.95 > f * v) {
    const z = v * 0.95 / f;
    p = p.map((g) => ({
      max: g.max > 0.01 ? g.max * z : 1
    }));
  }
  return p;
}, lt = (e) => {
  if (!e)
    return "";
  const t = e.match(/audio\/([^;]+)/);
  return t && t.length >= 2 ? `.${t[1]}` : "";
}, mt = (e) => {
  const t = Math.floor(e / 3600), n = Math.floor(e % 3600 / 60), r = e % 60, c = Math.floor(
    (r - Math.floor(r)) * 1e3
  );
  return t > 0 ? `${String(t).padStart(2, "0")}:${String(n).padStart(
    2,
    "0"
  )}:${String(Math.floor(r)).padStart(2, "0")}}h` : n > 0 ? `${String(n).padStart(2, "0")}:${String(
    Math.floor(r)
  ).padStart(2, "0")}m` : `${String(Math.floor(r)).padStart(2, "0")}:${String(
    c
  ).charAt(0)}${String(c).charAt(1)}s`;
}, vt = (e) => {
  onmessage = (t) => {
    postMessage(e(t.data));
  };
};
function dt({
  fn: e,
  initialValue: t,
  onMessageReceived: n
}) {
  const [r, c] = u(t);
  return {
    result: r,
    setResult: c,
    run: (M) => {
      const v = new Worker(
        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions
        URL.createObjectURL(new Blob([`(${vt})(${e})`]))
      );
      v.onmessage = (p) => {
        p.data && (c(p.data), n && n(), v.terminate());
      }, v.onerror = (p) => {
        console.error(p.message), v.terminate();
      }, v.postMessage(M);
    }
  };
}
const ft = (e, t = 250) => {
  const n = N();
  return it(
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    (...r) => {
      const c = () => {
        clearTimeout(n.current), e(...r);
      };
      clearTimeout(n.current), n.current = setTimeout(c, t);
    },
    [e, t]
  );
};
function zt(e) {
  const t = N(e);
  return Je(() => {
    t.current = e;
  }, [e]), t;
}
const gt = ({
  color: e = "#000000",
  stroke: t = 2,
  className: n
}) => /* @__PURE__ */ o(
  "svg",
  {
    viewBox: "0 0 23 33",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    className: n,
    children: /* @__PURE__ */ o(
      "path",
      {
        d: "M1.1 16.72c0 3 .96 5.8 3.61 7.95a9.96 9.96 0 0 0 6.5 2.17m0 0v4.34h4.34-8.67m4.34-4.34c2.35 0 4.42-.48 6.5-2.17a9.87 9.87 0 0 0 3.61-7.95M11.22 1.82c-1.45 0-2.5.37-3.3.93a5.6 5.6 0 0 0-1.84 2.4c-.9 2.06-1.1 4.77-1.1 7.24 0 2.46.2 5.17 1.1 7.24a5.6 5.6 0 0 0 1.84 2.4c.8.55 1.85.92 3.3.92 1.44 0 2.5-.37 3.29-.93a5.6 5.6 0 0 0 1.84-2.4c.9-2.06 1.1-4.77 1.1-7.23 0-2.47-.2-5.18-1.1-7.24a5.6 5.6 0 0 0-1.84-2.4 5.52 5.52 0 0 0-3.3-.93Z",
        stroke: e,
        strokeWidth: t,
        strokeLinecap: "round",
        strokeLinejoin: "round"
      }
    )
  }
), Pe = ({
  color: e = "#FFFFFF",
  reflect: t
}) => /* @__PURE__ */ o(
  "svg",
  {
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0.92 17.54 48.27 14.92",
    className: `voice-visualizer__canvas-audio-wave-icon ${t ? "voice-visualizer__canvas-audio-wave-icon2" : ""}`,
    children: /* @__PURE__ */ o(
      "path",
      {
        d: "M.92 24.63h.21v.75H.92zm.42-1.39h.21v3.52h-.21zm.43.68h.21v2.17h-.21zM2.2 22h.21v6.01H2.2zm.43-1.27h.21v8.55h-.21zm.43 2.07h.21v4.4h-.21zm.43 1.22h.21v1.97h-.21zm.43.47h.21v1.03h-.21zm.43-1.66h.21v4.35h-.21zm.43-1.74h.21v7.82h-.21zm.43 1.94h.21v3.94h-.21zm.43 1.07h.21v1.81h-.21zm.42-.94h.21v3.68h-.21zm.43.91h.21v1.86h-.21zm.43-.23h.21v2.33h-.21zm.43.46h.21v1.4h-.21zm.43-.7h.21v2.8h-.21zm.43-1.6h.21v6.01h-.21zm.43-2.23h.21v10.46h-.21zm.43-1.4h.21v13.26h-.21zm.43.62h.21v12.02H9.5zm.43 1.64h.21v8.75h-.21zm.43 1.37h.21v6.01h-.21zm.43-1.87H11v9.74h-.21zm.42 1.32h.21v7.1h-.21zm.43-2.64h.21v12.38h-.21zm.43 1.61h.21v9.17h-.21zM12.5 22h.21v6.01h-.21zm.43 1.32h.21v3.37h-.21zm.43-2.51h.21v8.39h-.21zm.43.59H14v7.2h-.21zm.43 1.79h.21v3.62h-.21zm.43.41h.21v2.8h-.21zm.43.57h.21v1.66h-.21zm.43-1.11h.21v3.88h-.21zm.42-2.98h.21v9.84h-.21zm.43 1.06h.21v7.72h-.21zm.43 3.19H17v1.35h-.21zm.86-2.33h.21v6.01h-.21zm-.43 1.4h.21v3.21h-.21zm1.29.15h.21v2.9h-.21zm.43.68h.21v1.55h-.21zm-.86-.76h.21v3.05h-.21zm1.29-.05h.21v3.16h-.21zm.43-.64h.21v4.45h-.21zm.43.38h.21v3.68h-.21zm.42-.49h.21v4.66h-.21zm.43 1.32h.21v2.02h-.21zm.43.37h.21v1.29h-.21zm.43.31h.21v.67h-.21zm.43-.39h.21v1.45h-.21zm.43-1.35h.21v4.14h-.21zm.86.73h.21v2.69h-.21zm-.43.44h.21v1.81h-.21zm1.29-3.45h.21v8.7h-.21zm.43 1.71h.21v5.28h-.21zm-.86-2.3h.21v9.89h-.21zm1.29 3.36h.21v3.16h-.21zM25.8 22h.21v6.01h-.21zm.43 1.42h.21v3.16h-.21zm.43.88h.21v1.4h-.21zm.43-.93h.21v3.26h-.21zm.43-1.37h.21v6.01h-.21zm.43-.93h.21v7.87h-.21zm.43-.76h.21v9.38h-.21zm.43 1.69h.21v6.01h-.21zm.86 1.92h.21v2.17h-.21zm-.43-.6h.21v3.37h-.21zm1.28.05h.21v3.26h-.21zm.43.67h.21v1.91h-.21zm-.85-.51h.21v2.95h-.21zm1.28-.13h.21v3.21h-.21zm.43-1.4h.21v6.01h-.21zm.43-.99h.21v7.98h-.21zm.43 1.77h.21v4.45h-.21zm.43-1.22h.21v6.89h-.21zm.43 1.6h.21v3.68h-.21zm.43-.28h.21v4.25h-.21zm.43-.6h.21v5.44h-.21zm.43-.28h.21v6.01h-.21zm.85 2.02h.21v1.97h-.21zm-.43-.57h.21v3.11h-.21zm1.29.93h.21v1.24h-.21zm.43-.65h.21v2.54h-.21zm-.86-.28h.21v3.11h-.21zm1.29.83h.21v1.45h-.21zm.43-.99h.21v3.42h-.21zm.43-.1h.21v3.62h-.21zm.43-.7h.21v5.02h-.21zm.43.8h.21v3.42h-.21zm.43-1.29h.21v6.01h-.21zm.42-1.71h.21v9.43h-.21zm.43 2.38h.21v4.66h-.21zm.43.65h.21v3.37h-.21zm.86.08h.21v3.21h-.21zm-.43.54h.21v2.12h-.21zm1.29-.05h.21v2.23h-.21zm.43.28h.21v1.66h-.21zm-.86.16h.21v1.35h-.21zm1.29.21h.21v.93h-.21zm.43-6.04h.21v13h-.21zm.43.8h.21v11.4h-.21zm.43-1.76h.21v14.92h-.21zm.42 1.09h.21v12.74h-.21zm.43 1.17h.21v10.41h-.21zm.43 1.32h.21v7.77h-.21zm.43 1.6h.21v4.56h-.21zm.43 1.17h.21v2.23h-.21zm.86-.08h.21v2.38h-.21zm-.43-.34h.21v3.05h-.21zm1.29-.1h.21v3.26h-.21zm.43.93h.21v1.4h-.21zm-.86-.02h.21v1.45h-.21z",
        fill: e
      }
    )
  }
), Be = "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjMiIGhlaWdodD0iMzMiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTEuMSAxNi43MmMwIDMgLjk2IDUuOCAzLjYxIDcuOTVhOS45NiA5Ljk2IDAgMCAwIDYuNSAyLjE3bTAgMHY0LjM0aDQuMzQtOC42N200LjM0LTQuMzRjMi4zNSAwIDQuNDItLjQ4IDYuNS0yLjE3YTkuODcgOS44NyAwIDAgMCAzLjYxLTcuOTVNMTEuMjIgMS44MmMtMS40NSAwLTIuNS4zNy0zLjMuOTNhNS42IDUuNiAwIDAgMC0xLjg0IDIuNGMtLjkgMi4wNi0xLjEgNC43Ny0xLjEgNy4yNCAwIDIuNDYuMiA1LjE3IDEuMSA3LjI0YTUuNiA1LjYgMCAwIDAgMS44NCAyLjRjLjguNTUgMS44NS45MiAzLjMuOTIgMS40NCAwIDIuNS0uMzcgMy4yOS0uOTNhNS42IDUuNiAwIDAgMCAxLjg0LTIuNGMuOS0yLjA2IDEuMS00Ljc3IDEuMS03LjIzIDAtMi40Ny0uMi01LjE4LTEuMS03LjI0YTUuNiA1LjYgMCAwIDAtMS44NC0yLjQgNS41MiA1LjUyIDAgMCAwLTMuMy0uOTNaIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K", Mt = "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTE4Ljc1IDYuMTZjNC4zMSAyLjYgNi40NiAzLjkgNi40NiA1Ljg0IDAgMS45NS0yLjE1IDMuMjQtNi40NiA1Ljg0bC00Ljg0IDIuOTJjLTQuMzEgMi42LTYuNDYgMy44OS04LjA4IDIuOTItMS42Mi0uOTgtMS42Mi0zLjU3LTEuNjItOC43NlY5LjA4YzAtNS4xOSAwLTcuNzggMS42Mi04Ljc2IDEuNjItLjk3IDMuNzcuMzMgOC4wOCAyLjkybDQuODQgMi45MloiIGZpbGw9IiNmZmYiLz4KPC9zdmc+Cg==", ke = "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTE0IDMuNWEzLjUgMy41IDAgMSAxIDcgMHYyMmEzLjUgMy41IDAgMSAxLTcgMHYtMjJaIiBmaWxsPSIjZmZmIi8+CiAgPHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjkiIHJ4PSIzLjUiIGZpbGw9IiNmZmYiLz4KPC9zdmc+Cg==", pt = "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjciIGhlaWdodD0iMjUiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3QgeD0iLjIxIiB3aWR0aD0iMjYiIGhlaWdodD0iMjUiIHJ4PSI1IiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo=", Lt = ct(
  ({
    controls: {
      audioData: e,
      isRecordingInProgress: t,
      recordedBlob: n,
      duration: r,
      currentAudioTime: c,
      audioSrc: h,
      bufferFromRecordedBlob: M,
      togglePauseResume: v,
      startRecording: p,
      stopRecording: f,
      saveAudioFile: z,
      isAvailableRecordedAudio: g,
      isPausedRecordedAudio: A,
      isPausedRecording: S,
      isProcessingStartRecording: a,
      isProcessingRecordedAudio: l,
      isCleared: j,
      formattedDuration: m,
      formattedRecordingTime: x,
      formattedRecordedAudioCurrentTime: H,
      clearCanvas: ee,
      setCurrentAudioTime: $,
      isProcessingOnResize: P,
      _setIsProcessingOnResize: y,
      _setIsProcessingAudioOnComplete: te
    },
    width: O = "100%",
    height: le = 200,
    speed: re = 3,
    backgroundColor: Y = "transparent",
    mainBarColor: C = "#FFFFFF",
    secondaryBarColor: R = "#5e5e5e",
    barWidth: ne = 2,
    gap: Ie = 1,
    rounded: Z = 5,
    isControlPanelShown: ie = !0,
    isDownloadAudioButtonShown: B = !1,
    animateCurrentPick: ce = !0,
    fullscreen: me = !1,
    onlyRecording: k = !1,
    isDefaultUIShown: ve = !0,
    defaultMicrophoneIconColor: de = C,
    defaultAudioWaveIconColor: J = C,
    mainContainerClassName: we,
    canvasContainerClassName: oe,
    isProgressIndicatorShown: I = !k,
    progressIndicatorClassName: U,
    isProgressIndicatorTimeShown: Q = !0,
    progressIndicatorTimeClassName: se,
    isProgressIndicatorOnHoverShown: V = !k,
    progressIndicatorOnHoverClassName: E,
    isProgressIndicatorTimeOnHoverShown: b = !0,
    progressIndicatorTimeOnHoverClassName: s,
    isAudioProcessingTextShown: Le = !0,
    audioProcessingTextClassName: Ee,
    controlButtonsClassName: Se
  }, Ce) => {
    const [fe, Ne] = u(0), [T, be] = u(0), [q, ze] = u(0), [ae, xe] = u(0), [ue, X] = u(!1), [Ae, je] = u(window.innerWidth), [he, ye] = u(!1), i = Ae < 768, d = Math.trunc(re), _ = Math.trunc(Ie), w = Math.trunc(
      i && _ > 0 ? ne + 1 : ne
    ), De = w + _ * w, L = N(null), Oe = N([]), Te = N(d), Ve = N(w), qe = N(w), ge = N(null), G = Ce, Xe = zt(Ae), {
      result: Me,
      setResult: Ke,
      run: et
    } = dt({
      fn: ht,
      initialValue: [],
      onMessageReceived: rt
    }), tt = ft(He);
    F(() => {
      He();
      const D = () => {
        Xe.current !== window.innerWidth && (g ? (je(window.innerWidth), y(!0), ye(!0), tt()) : (je(window.innerWidth), He()));
      };
      return window.addEventListener("resize", D), () => {
        window.removeEventListener("resize", D);
      };
    }, [O, g]), Je(() => {
      L.current && ((Te.current >= d || !e.length) && (Te.current = e.length ? 0 : d, at({
        audioData: e,
        unit: De,
        index: Ve,
        index2: qe,
        canvas: L.current,
        picks: Oe.current,
        isRecordingInProgress: t,
        isPausedRecording: S,
        backgroundColor: Y,
        mainBarColor: C,
        secondaryBarColor: R,
        barWidth: w,
        rounded: Z,
        animateCurrentPick: ce,
        fullscreen: me
      })), Te.current += 1);
    }, [
      L.current,
      e,
      w,
      Y,
      C,
      R,
      Z,
      me,
      ve,
      ae
    ]), F(() => {
      var D, W;
      if (g)
        return ue ? (D = L.current) == null || D.addEventListener("mouseleave", Ze) : (W = L.current) == null || W.addEventListener("mouseenter", Re), () => {
          var pe, Ye;
          ue ? (pe = L.current) == null || pe.removeEventListener(
            "mouseleave",
            Ze
          ) : (Ye = L.current) == null || Ye.removeEventListener(
            "mouseenter",
            Re
          );
        };
    }, [ue, g]), F(() => {
      var W;
      if (!M || !L.current || t || he)
        return;
      if (k) {
        ee();
        return;
      }
      Oe.current = [];
      const D = M.getChannelData(0);
      return et({
        bufferData: D,
        height: q,
        width: ae,
        barWidth: w,
        gap: _
      }), (W = L.current) == null || W.addEventListener(
        "mousemove",
        Ue
      ), () => {
        var pe;
        (pe = L.current) == null || pe.removeEventListener(
          "mousemove",
          Ue
        );
      };
    }, [
      M,
      T,
      q,
      Ie,
      ne,
      he
    ]), F(() => {
      if (!(k || !(Me != null && Me.length) || !L.current || l)) {
        if (j) {
          Ke([]);
          return;
        }
        ot({
          barsData: Me,
          canvas: L.current,
          barWidth: w,
          gap: _,
          backgroundColor: Y,
          mainBarColor: C,
          secondaryBarColor: R,
          currentAudioTime: c,
          rounded: Z,
          duration: r
        });
      }
    }, [
      Me,
      c,
      j,
      Z,
      Y,
      C,
      R
    ]), F(() => {
      l && L.current && $e({
        canvas: L.current,
        backgroundColor: Y
      });
    }, [l]);
    function He() {
      if (!ge.current || !L.current)
        return;
      Te.current = d;
      const D = Math.trunc(
        ge.current.clientHeight * window.devicePixelRatio / 2
      ) * 2;
      be(ge.current.clientWidth), ze(D), xe(
        Math.round(
          ge.current.clientWidth * window.devicePixelRatio
        )
      ), ye(!1);
    }
    function rt() {
      y(!1), te(!1), G != null && G.current && !P && (G.current.src = h);
    }
    const Re = () => {
      X(!0);
    }, Ze = () => {
      X(!1);
    }, Ue = (D) => {
      Ne(D.offsetX);
    }, nt = (D) => {
      if (G != null && G.current && L.current) {
        const W = r / T * (D.clientX - L.current.getBoundingClientRect().left);
        G.current.currentTime = W, $(W);
      }
    }, Fe = c / r * T;
    return /* @__PURE__ */ K("div", { className: `voice-visualizer ${we ?? ""}`, children: [
      /* @__PURE__ */ K(
        "div",
        {
          className: `voice-visualizer__canvas-container ${oe ?? ""}`,
          ref: ge,
          style: { width: We(O) },
          children: [
            /* @__PURE__ */ o(
              "canvas",
              {
                ref: L,
                width: ae,
                height: q,
                onClick: nt,
                style: {
                  height: We(le),
                  width: T
                },
                children: "Your browser does not support HTML5 Canvas."
              }
            ),
            ve && j && /* @__PURE__ */ K(Ge, { children: [
              /* @__PURE__ */ o(Pe, { color: J }),
              /* @__PURE__ */ o(Pe, { color: J, reflect: !0 }),
              /* @__PURE__ */ o(
                "button",
                {
                  onClick: p,
                  className: "voice-visualizer__canvas-microphone-btn",
                  children: /* @__PURE__ */ o(
                    gt,
                    {
                      color: de,
                      stroke: 0.5,
                      className: "voice-visualizer__canvas-microphone-icon"
                    }
                  )
                }
              )
            ] }),
            Le && l && /* @__PURE__ */ o(
              "p",
              {
                className: `voice-visualizer__canvas-audio-processing ${Ee ?? ""}`,
                style: { color: C },
                children: "Processing Audio..."
              }
            ),
            ue && g && !l && !i && V && /* @__PURE__ */ o(
              "div",
              {
                className: `voice-visualizer__progress-indicator-hovered ${E ?? ""}`,
                style: {
                  left: fe
                },
                children: b && /* @__PURE__ */ o(
                  "p",
                  {
                    className: `voice-visualizer__progress-indicator-hovered-time 
                    ${T - fe < 70 ? "voice-visualizer__progress-indicator-hovered-time-left" : ""} 
                    ${s ?? ""}`,
                    children: Qe(
                      r / T * fe
                    )
                  }
                )
              }
            ),
            I && g && !l && r ? /* @__PURE__ */ o(
              "div",
              {
                className: `voice-visualizer__progress-indicator ${U ?? ""}`,
                style: {
                  left: Fe < T - 1 ? Fe : T - 1
                },
                children: Q && /* @__PURE__ */ o(
                  "p",
                  {
                    className: `voice-visualizer__progress-indicator-time ${T - c * T / r < 70 ? "voice-visualizer__progress-indicator-time-left" : ""} ${se ?? ""}`,
                    children: H
                  }
                )
              }
            ) : null
          ]
        }
      ),
      ie && /* @__PURE__ */ K(Ge, { children: [
        /* @__PURE__ */ K("div", { className: "voice-visualizer__audio-info-container", children: [
          t && /* @__PURE__ */ o("p", { className: "voice-visualizer__audio-info-time", children: x }),
          r && !l ? /* @__PURE__ */ o("p", { children: m }) : null
        ] }),
        /* @__PURE__ */ K("div", { className: "voice-visualizer__buttons-container", children: [
          t && /* @__PURE__ */ o("div", { className: "voice-visualizer__btn-container", children: /* @__PURE__ */ o(
            "button",
            {
              className: `voice-visualizer__btn-left ${S ? "voice-visualizer__btn-left-microphone" : ""}`,
              onClick: v,
              children: /* @__PURE__ */ o(
                "img",
                {
                  src: S ? Be : ke,
                  alt: S ? "Play" : "Pause"
                }
              )
            }
          ) }),
          !j && /* @__PURE__ */ o(
            "button",
            {
              className: `voice-visualizer__btn-left ${t || a ? "voice-visualizer__visually-hidden" : ""}`,
              onClick: v,
              disabled: l,
              children: /* @__PURE__ */ o(
                "img",
                {
                  src: A ? Mt : ke,
                  alt: A ? "Play" : "Pause"
                }
              )
            }
          ),
          j && /* @__PURE__ */ K(
            "button",
            {
              className: `voice-visualizer__btn-center relative ${a ? "voice-visualizer__btn-center--border-transparent" : ""}`,
              onClick: p,
              disabled: a,
              children: [
                a && /* @__PURE__ */ o("div", { className: "spinner__wrapper", children: /* @__PURE__ */ o("div", { className: "spinner" }) }),
                /* @__PURE__ */ o("img", { src: Be, alt: "Microphone" })
              ]
            }
          ),
          /* @__PURE__ */ o(
            "button",
            {
              className: `voice-visualizer__btn-center voice-visualizer__btn-center-pause ${t ? "" : "voice-visualizer__visually-hidden"}`,
              onClick: f,
              children: /* @__PURE__ */ o("img", { src: pt, alt: "Stop" })
            }
          ),
          !j && /* @__PURE__ */ o(
            "button",
            {
              onClick: ee,
              className: `voice-visualizer__btn ${Se ?? ""}`,
              disabled: l,
              children: "Clear"
            }
          ),
          B && n && /* @__PURE__ */ o(
            "button",
            {
              onClick: z,
              className: `voice-visualizer__btn ${Se ?? ""}`,
              disabled: l,
              children: "Download Audio"
            }
          )
        ] })
      ] })
    ] });
  }
);
function St({
  onStartRecording: e,
  onStopRecording: t,
  onPausedRecording: n,
  onResumedRecording: r,
  onClearCanvas: c,
  onEndAudioPlayback: h,
  onStartAudioPlayback: M,
  onPausedAudioPlayback: v,
  onResumedAudioPlayback: p,
  onErrorPlayingAudio: f
} = {}) {
  const [z, g] = u(!1), [A, S] = u(!1), [a, l] = u(null), [j, m] = u(new Uint8Array(0)), [x, H] = u(!1), [ee, $] = u(null), [P, y] = u(null), [te, O] = u(0), [le, re] = u(0), [Y, C] = u(0), [R, ne] = u(""), [Ie, Z] = u(!0), [ie, B] = u(0), [ce, me] = u(!0), [k, ve] = u(!1), [de, J] = u(null), [we, oe] = u(!1), I = N(null), U = N(null), Q = N(null), se = N(null), V = N(null), E = N(null), b = N(null), s = N(null), Le = !!(P && !x), Ee = mt(Y), Se = ut(te), Ce = Qe(ie), fe = k || x;
  F(() => {
    if (!z || A)
      return;
    const d = setInterval(() => {
      const _ = performance.now();
      O((w) => w + (_ - le)), re(_);
    }, 1e3);
    return () => clearInterval(d);
  }, [le, A, z]), F(() => {
    if (de) {
      X();
      return;
    }
  }, [de]), F(() => () => {
    X();
  }, []), F(() => (ce || window.addEventListener("beforeunload", Ne), () => {
    window.removeEventListener("beforeunload", Ne);
  }), [ce]);
  const Ne = (i) => {
    i.preventDefault(), i.returnValue = "";
  }, T = async (i) => {
    if (i)
      try {
        if (i.size === 0)
          throw new Error("Error: The audio blob is empty");
        const d = URL.createObjectURL(i);
        ne(d);
        const _ = await i.arrayBuffer(), De = await new AudioContext().decodeAudioData(_);
        y(De), C(De.duration - 0.06), J(null);
      } catch (d) {
        console.error("Error processing the audio blob:", d), J(
          d instanceof Error ? d : new Error("Error processing the audio blob")
        );
      }
  }, be = () => {
    oe(!0), navigator.mediaDevices.getUserMedia({ audio: !0 }).then((i) => {
      me(!1), oe(!1), g(!0), re(performance.now()), l(i), U.current = new window.AudioContext(), Q.current = U.current.createAnalyser(), se.current = new Uint8Array(
        Q.current.frequencyBinCount
      ), V.current = U.current.createMediaStreamSource(i), V.current.connect(Q.current), I.current = new MediaRecorder(i), I.current.addEventListener(
        "dataavailable",
        ze
      ), I.current.start(), e && e(), q();
    }).catch((i) => {
      oe(!1), J(
        i instanceof Error ? i : new Error("Error starting audio recording")
      );
    });
  }, q = () => {
    Q.current.getByteTimeDomainData(se.current), m(new Uint8Array(se.current)), E.current = requestAnimationFrame(q);
  }, ze = (i) => {
    I.current && (I.current = null, s.current = new Audio(), $(i.data), T(i.data));
  }, ae = () => {
    s.current && (B(s.current.currentTime), b.current = requestAnimationFrame(ae));
  }, xe = () => {
    z || we || (ce || X(), be());
  }, ue = () => {
    z && (g(!1), I.current && (I.current.stop(), I.current.removeEventListener(
      "dataavailable",
      ze
    )), a == null || a.getTracks().forEach((i) => i.stop()), E.current && cancelAnimationFrame(E.current), V.current && V.current.disconnect(), U.current && U.current.state !== "closed" && U.current.close(), H(!0), O(0), S(!1), t && t());
  }, X = () => {
    E.current && (cancelAnimationFrame(E.current), E.current = null), b.current && (cancelAnimationFrame(b.current), b.current = null), I.current && (I.current.removeEventListener(
      "dataavailable",
      ze
    ), I.current.stop(), I.current = null), a == null || a.getTracks().forEach((i) => i.stop()), s != null && s.current && (s.current.removeEventListener("ended", he), s.current.pause(), s.current.src = "", s.current = null), U.current = null, Q.current = null, se.current = null, V.current = null, l(null), oe(!1), g(!1), H(!1), $(null), y(null), O(0), re(0), C(0), ne(""), B(0), Z(!0), S(!1), ve(!1), m(new Uint8Array(0)), J(null), me(!0), c && c();
  }, Ae = () => {
    if (s.current && s.current.paused) {
      const i = s.current.play();
      i !== void 0 && i.catch((d) => {
        console.error(d), f && f(
          d instanceof Error ? d : new Error("Error playing audio")
        );
      });
    }
  }, je = () => {
    var i, d, _;
    if (z) {
      S((w) => !w), ((i = I.current) == null ? void 0 : i.state) === "recording" ? ((d = I.current) == null || d.pause(), O((w) => w + (performance.now() - le)), E.current && cancelAnimationFrame(E.current), n && n()) : (E.current = requestAnimationFrame(q), (_ = I.current) == null || _.resume(), re(performance.now()), r && r());
      return;
    }
    if (s.current && Le)
      if (s.current.paused)
        requestAnimationFrame(ae), Ae(), s.current.addEventListener("ended", he), Z(!1), M && ie === 0 && M(), p && ie !== 0 && p();
      else {
        b.current && cancelAnimationFrame(b.current), s.current.removeEventListener("ended", he), s.current.pause(), Z(!0);
        const w = s.current.currentTime;
        B(w), s.current.currentTime = w, v && v();
      }
  }, he = () => {
    b.current && cancelAnimationFrame(b.current), Z(!0), s != null && s.current && (s.current.currentTime = 0, B(0), h && h());
  }, ye = () => {
    var d;
    if (!R)
      return;
    const i = document.createElement("a");
    i.href = R, i.download = `recorded_audio${lt(
      (d = I.current) == null ? void 0 : d.mimeType
    )}`, document.body.appendChild(i), i.click(), document.body.removeChild(i), URL.revokeObjectURL(R);
  };
  return {
    audioRef: s,
    isRecordingInProgress: z,
    isPausedRecording: A,
    audioData: j,
    recordingTime: te,
    isProcessingRecordedAudio: fe,
    recordedBlob: ee,
    mediaRecorder: I.current,
    duration: Y,
    currentAudioTime: ie,
    audioSrc: R,
    isPausedRecordedAudio: Ie,
    bufferFromRecordedBlob: P,
    isCleared: ce,
    isAvailableRecordedAudio: Le,
    formattedDuration: Ee,
    formattedRecordingTime: Se,
    formattedRecordedAudioCurrentTime: Ce,
    startRecording: xe,
    togglePauseResume: je,
    stopRecording: ue,
    saveAudioFile: ye,
    clearCanvas: X,
    setCurrentAudioTime: B,
    error: de,
    isProcessingOnResize: k,
    isProcessingStartRecording: we,
    _setIsProcessingAudioOnComplete: H,
    _setIsProcessingOnResize: ve
  };
}
export {
  Lt as VoiceVisualizer,
  St as useVoiceVisualizer
};
